{"ast":null,"code":"import _objectSpread from\"C:/Users/jothe/Downloads/Cracker/Cracker/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";// src/pages/Products.jsx\nimport React,{useEffect,useState}from'react';import{useNavigate}from'react-router-dom';import ProductItem from'../components/ProductItem';import'./Products.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function Products(_ref){let{onAddToCart}=_ref;const[products,setProducts]=useState([]);const[filtered,setFiltered]=useState([]);const[search,setSearch]=useState('');const[category,setCategory]=useState('All');const navigate=useNavigate();const categories=['All','30 cm Sparklers','15 cm Sparklers','7 cm Sparklers','12 cm Sparklers','50 cm Sparklers','10 cm Sparklers','All Sparklers','Flower Pots','Chakkars','Rockets','Fancy Novelties','Fountains','Candles & Twinkling Star','Mega Fountains','One Sound Crackers','Rockets','New Novelties','Elite Series','Mini Aerial Fancy','Paper Bombs','Repeating Shots','Atom Bombs','New Arrival','Aerial Magic Fancy','Color Matches'];useEffect(()=>{// ✅ Use deployed backend\nconst API_BASE=process.env.REACT_APP_API||\"https://cracker-backend-b8ff.onrender.com/api\";fetch(\"\".concat(API_BASE,\"/products\")).then(res=>res.json()).then(data=>{const formatted=data.map(p=>_objectSpread(_objectSpread({},p),{},{// ✅ Fixed template literal\nimageUrl:\"\".concat(API_BASE.replace(\"/api\",\"\")).concat(p.image||\"\")}));setProducts(formatted);setFiltered(formatted);}).catch(err=>{console.error(\"Failed to fetch products:\",err);});},[]);useEffect(()=>{let temp=[...products];if(category!=='All'){if(category==='All Sparklers'){temp=temp.filter(p=>p.category.toLowerCase().includes('sparklers'));}else{temp=temp.filter(p=>p.category===category);}}if(search.trim()){const keyword=search.toLowerCase();temp=temp.filter(p=>p.name.toLowerCase().includes(keyword));}setFiltered(temp);},[search,category,products]);// Firework effect\nuseEffect(()=>{const container=document.getElementById('firework-container');const createBurst=()=>{const count=20;const x=Math.random()*window.innerWidth;const y=Math.random()*window.innerHeight*0.5+100;for(let i=0;i<count;i++){const particle=document.createElement('div');particle.className='firework-burst';const angle=360/count*i;const distance=Math.random()*80+40;const dx=Math.cos(angle*Math.PI/180)*distance;const dy=Math.sin(angle*Math.PI/180)*distance;particle.style.left=\"\".concat(x,\"px\");particle.style.top=\"\".concat(y,\"px\");particle.style.backgroundColor=\"hsl(\".concat(Math.random()*360,\", 100%, 70%)\");particle.style.setProperty('--dx',\"\".concat(dx,\"px\"));particle.style.setProperty('--dy',\"\".concat(dy,\"px\"));container===null||container===void 0?void 0:container.appendChild(particle);setTimeout(()=>{particle.remove();},1500);}};const interval=setInterval(createBurst,1200);return()=>clearInterval(interval);},[]);return/*#__PURE__*/_jsxs(\"div\",{className:\"products-page\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"firework-container\",id:\"firework-container\"}),/*#__PURE__*/_jsx(\"h2\",{children:\"\\uD83C\\uDF86 Our Products\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"filters\",style:{marginBottom:'1rem',display:'flex',gap:'10px'},children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"\\uD83D\\uDD0D Search products...\",value:search,onChange:e=>setSearch(e.target.value)}),/*#__PURE__*/_jsx(\"select\",{value:category,onChange:e=>setCategory(e.target.value),children:categories.map((cat,i)=>/*#__PURE__*/_jsx(\"option\",{value:cat,children:cat},i))}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>{setSearch('');setCategory('All');},children:\"Reset\"})]}),category!=='All'&&/*#__PURE__*/_jsxs(\"h3\",{className:\"category-heading\",style:{color:'white'},children:[\"\\uD83C\\uDF87 \",category]}),/*#__PURE__*/_jsx(\"div\",{className:\"products-grid\",children:filtered.length===0?/*#__PURE__*/_jsx(\"div\",{className:\"not-found\",children:\"\\u274C No products found\"}):filtered.map(product=>/*#__PURE__*/_jsx(ProductItem,{product:product,onAddToCart:()=>onAddToCart(product,navigate)},product._id))})]});}export default Products;","map":{"version":3,"names":["React","useEffect","useState","useNavigate","ProductItem","jsx","_jsx","jsxs","_jsxs","Products","_ref","onAddToCart","products","setProducts","filtered","setFiltered","search","setSearch","category","setCategory","navigate","categories","API_BASE","process","env","REACT_APP_API","fetch","concat","then","res","json","data","formatted","map","p","_objectSpread","imageUrl","replace","image","catch","err","console","error","temp","filter","toLowerCase","includes","trim","keyword","name","container","document","getElementById","createBurst","count","x","Math","random","window","innerWidth","y","innerHeight","i","particle","createElement","className","angle","distance","dx","cos","PI","dy","sin","style","left","top","backgroundColor","setProperty","appendChild","setTimeout","remove","interval","setInterval","clearInterval","children","id","marginBottom","display","gap","type","placeholder","value","onChange","e","target","cat","onClick","color","length","product","_id"],"sources":["C:/Users/jothe/Downloads/Cracker/Cracker/frontend/src/pages/Products.jsx"],"sourcesContent":["// src/pages/Products.jsx\r\nimport React, { useEffect, useState } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport ProductItem from '../components/ProductItem';\r\nimport './Products.css';\r\n\r\nfunction Products({ onAddToCart }) {\r\n  const [products, setProducts] = useState([]);\r\n  const [filtered, setFiltered] = useState([]);\r\n  const [search, setSearch] = useState('');\r\n  const [category, setCategory] = useState('All');\r\n  const navigate = useNavigate();\r\n\r\n  const categories = [\r\n    'All', '30 cm Sparklers', '15 cm Sparklers', '7 cm Sparklers',\r\n    '12 cm Sparklers', '50 cm Sparklers', '10 cm Sparklers',\r\n    'All Sparklers', 'Flower Pots', 'Chakkars', 'Rockets',\r\n    'Fancy Novelties', 'Fountains', 'Candles & Twinkling Star',\r\n    'Mega Fountains', 'One Sound Crackers', 'Rockets','New Novelties',\r\n    'Elite Series','Mini Aerial Fancy','Paper Bombs','Repeating Shots',\r\n    'Atom Bombs','New Arrival','Aerial Magic Fancy','Color Matches'\r\n  ];\r\n\r\n  useEffect(() => {\r\n    // ✅ Use deployed backend\r\n    const API_BASE = process.env.REACT_APP_API || \"https://cracker-backend-b8ff.onrender.com/api\";\r\n\r\n    fetch(`${API_BASE}/products`)\r\n      .then(res => res.json())\r\n      .then(data => {\r\n        const formatted = data.map(p => ({\r\n          ...p,\r\n          // ✅ Fixed template literal\r\n          imageUrl: `${API_BASE.replace(\"/api\",\"\")}${p.image || \"\"}`,\r\n        }));\r\n        setProducts(formatted);\r\n        setFiltered(formatted);\r\n      })\r\n      .catch(err => {\r\n        console.error(\"Failed to fetch products:\", err);\r\n      });\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    let temp = [...products];\r\n\r\n    if (category !== 'All') {\r\n      if (category === 'All Sparklers') {\r\n        temp = temp.filter(p => p.category.toLowerCase().includes('sparklers'));\r\n      } else {\r\n        temp = temp.filter(p => p.category === category);\r\n      }\r\n    }\r\n\r\n    if (search.trim()) {\r\n      const keyword = search.toLowerCase();\r\n      temp = temp.filter(p => p.name.toLowerCase().includes(keyword));\r\n    }\r\n\r\n    setFiltered(temp);\r\n  }, [search, category, products]);\r\n\r\n  // Firework effect\r\n  useEffect(() => {\r\n    const container = document.getElementById('firework-container');\r\n\r\n    const createBurst = () => {\r\n      const count = 20;\r\n      const x = Math.random() * window.innerWidth;\r\n      const y = Math.random() * window.innerHeight * 0.5 + 100;\r\n\r\n      for (let i = 0; i < count; i++) {\r\n        const particle = document.createElement('div');\r\n        particle.className = 'firework-burst';\r\n\r\n        const angle = (360 / count) * i;\r\n        const distance = Math.random() * 80 + 40;\r\n        const dx = Math.cos((angle * Math.PI) / 180) * distance;\r\n        const dy = Math.sin((angle * Math.PI) / 180) * distance;\r\n\r\n        particle.style.left = `${x}px`;\r\n        particle.style.top = `${y}px`;\r\n        particle.style.backgroundColor = `hsl(${Math.random() * 360}, 100%, 70%)`;\r\n        particle.style.setProperty('--dx', `${dx}px`);\r\n        particle.style.setProperty('--dy', `${dy}px`);\r\n\r\n        container?.appendChild(particle);\r\n\r\n        setTimeout(() => {\r\n          particle.remove();\r\n        }, 1500);\r\n      }\r\n    };\r\n\r\n    const interval = setInterval(createBurst, 1200);\r\n    return () => clearInterval(interval);\r\n  }, []);\r\n\r\n  return (\r\n    <div className=\"products-page\">\r\n      <div className=\"firework-container\" id=\"firework-container\"></div>\r\n\r\n      <h2>🎆 Our Products</h2>\r\n\r\n      <div className=\"filters\" style={{ marginBottom: '1rem', display: 'flex', gap: '10px' }}>\r\n        <input\r\n          type=\"text\"\r\n          placeholder=\"🔍 Search products...\"\r\n          value={search}\r\n          onChange={(e) => setSearch(e.target.value)}\r\n        />\r\n        <select value={category} onChange={(e) => setCategory(e.target.value)}>\r\n          {categories.map((cat, i) => (\r\n            <option key={i} value={cat}>{cat}</option>\r\n          ))}\r\n        </select>\r\n        <button onClick={() => { setSearch(''); setCategory('All'); }}>Reset</button>\r\n      </div>\r\n\r\n      {category !== 'All' && (\r\n        <h3 className=\"category-heading\" style={{color:'white'}}>🎇 {category}</h3>\r\n      )}\r\n\r\n      <div className=\"products-grid\">\r\n        {filtered.length === 0 ? (\r\n          <div className=\"not-found\">❌ No products found</div>\r\n        ) : (\r\n          filtered.map((product) => (\r\n            <ProductItem key={product._id} product={product} onAddToCart={() => onAddToCart(product, navigate)} />\r\n          ))\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Products;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}