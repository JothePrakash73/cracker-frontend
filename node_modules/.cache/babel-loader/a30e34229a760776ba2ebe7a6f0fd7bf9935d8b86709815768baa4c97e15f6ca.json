{"ast":null,"code":"// src/components/CartDrawer.jsx\nimport React,{useState}from'react';import CartItem from'./CartItem';import'./CartDrawer.css';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";function CartDrawer(_ref){let{isOpen,onClose,cartItems,onRemoveFromCart,onUpdateQuantity}=_ref;const[name,setName]=useState('');const[phone,setPhone]=useState('');const[place,setPlace]=useState('');const DISCOUNT=0.2;// 80% OFF → pay 20%\nconst total=cartItems.reduce((sum,item)=>sum+item.price*DISCOUNT*item.quantity,0);const handleSubmitOrder=()=>{if(!name||!phone||!place){alert('⚠️ Please fill all details.');return;}if(cartItems.length===0){alert('⚠️ Your cart is empty.');return;}// Create WhatsApp order message\nconst lines=[];lines.push(\"\\uD83E\\uDDE8 *Sri Pathrakali Crackers Order*\");lines.push(\"--------------------------------\");lines.push(\"\\uD83D\\uDC64 *Name:* \".concat(name));lines.push(\"\\uD83D\\uDCDE *Phone:* \".concat(phone));lines.push(\"\\uD83D\\uDCCD *Place:* \".concat(place));lines.push(\"\");lines.push(\"\\uD83D\\uDED2 *Items Ordered:*\");cartItems.forEach((item,idx)=>{const discountedPrice=item.price*DISCOUNT;const subtotal=discountedPrice*item.quantity;lines.push(\"\".concat(idx+1,\". \").concat(item.name));lines.push(\"   Qty: \".concat(item.quantity));lines.push(\"   Price: \\u20B9\".concat(discountedPrice.toFixed(2),\" each\"));lines.push(\"   Subtotal: \\u20B9\".concat(subtotal.toFixed(2)));lines.push(\"\");});lines.push(\"\\uD83D\\uDCB0 *Total Payable:* \\u20B9\".concat(total.toFixed(2)));lines.push(\"\\uD83C\\uDF89 Thank you for ordering with us!\");const message=lines.join('\\n');const encodedMessage=encodeURIComponent(message);const whatsappNumber='917305171319';const isMobile=/Android|iPhone|iPad|iPod/i.test(navigator.userAgent);if(isMobile){// Mobile: open WhatsApp app\nwindow.location.href=\"https://wa.me/\".concat(whatsappNumber,\"?text=\").concat(encodedMessage);}else{// Desktop: try WhatsApp app via iframe first, fallback to web\nconst appUrl=\"whatsapp://send?phone=\".concat(whatsappNumber,\"&text=\").concat(encodedMessage);const webUrl=\"https://web.whatsapp.com/send?phone=\".concat(whatsappNumber,\"&text=\").concat(encodedMessage);const iframe=document.createElement('iframe');iframe.style.display='none';iframe.src=appUrl;document.body.appendChild(iframe);setTimeout(()=>{document.body.removeChild(iframe);window.open(webUrl,'_blank');},1000);}};return/*#__PURE__*/_jsxs(\"div\",{className:\"cart-drawer \".concat(isOpen?'open':''),children:[/*#__PURE__*/_jsxs(\"div\",{className:\"cart-drawer-header\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Your Cart\"}),/*#__PURE__*/_jsx(\"button\",{onClick:onClose,className:\"close-button\",children:\"\\xD7\"})]}),cartItems.length===0?/*#__PURE__*/_jsx(\"p\",{className:\"empty-cart\",children:\"Your cart is empty\"}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"cart-items\",children:cartItems.map(item=>/*#__PURE__*/_jsx(CartItem,{item:item,onRemoveFromCart:onRemoveFromCart,onUpdateQuantity:onUpdateQuantity},item._id))}),/*#__PURE__*/_jsxs(\"div\",{className:\"cart-drawer-summary\",children:[/*#__PURE__*/_jsxs(\"h3\",{style:{color:'white'},children:[\"Total (after 80% OFF): \\u20B9\",total.toFixed(2)]}),/*#__PURE__*/_jsxs(\"div\",{className:\"customer-details\",style:{marginBottom:'10px'},children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Customer Name\",value:name,onChange:e=>setName(e.target.value)}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Phone Number\",value:phone,onChange:e=>setPhone(e.target.value)}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Place\",value:place,onChange:e=>setPlace(e.target.value)})]}),/*#__PURE__*/_jsx(\"button\",{className:\"purchase-button\",onClick:handleSubmitOrder,children:\"\\uD83D\\uDCE4 Submit Order to WhatsApp\"})]})]})]});}export default CartDrawer;","map":{"version":3,"names":["React","useState","CartItem","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","CartDrawer","_ref","isOpen","onClose","cartItems","onRemoveFromCart","onUpdateQuantity","name","setName","phone","setPhone","place","setPlace","DISCOUNT","total","reduce","sum","item","price","quantity","handleSubmitOrder","alert","length","lines","push","concat","forEach","idx","discountedPrice","subtotal","toFixed","message","join","encodedMessage","encodeURIComponent","whatsappNumber","isMobile","test","navigator","userAgent","window","location","href","appUrl","webUrl","iframe","document","createElement","style","display","src","body","appendChild","setTimeout","removeChild","open","className","children","onClick","map","_id","color","marginBottom","type","placeholder","value","onChange","e","target"],"sources":["C:/Users/jothe/Downloads/Cracker/Cracker/frontend/src/components/CartDrawer.jsx"],"sourcesContent":["// src/components/CartDrawer.jsx\r\nimport React, { useState } from 'react';\r\nimport CartItem from './CartItem';\r\nimport './CartDrawer.css';\r\n\r\nfunction CartDrawer({ isOpen, onClose, cartItems, onRemoveFromCart, onUpdateQuantity }) {\r\n  const [name, setName] = useState('');\r\n  const [phone, setPhone] = useState('');\r\n  const [place, setPlace] = useState('');\r\n\r\n  const DISCOUNT = 0.2; // 80% OFF → pay 20%\r\n  const total = cartItems.reduce((sum, item) => sum + item.price * DISCOUNT * item.quantity, 0);\r\n\r\n  const handleSubmitOrder = () => {\r\n    if (!name || !phone || !place) {\r\n      alert('⚠️ Please fill all details.');\r\n      return;\r\n    }\r\n\r\n    if (cartItems.length === 0) {\r\n      alert('⚠️ Your cart is empty.');\r\n      return;\r\n    }\r\n\r\n    // Create WhatsApp order message\r\n    const lines = [];\r\n\r\n    lines.push(`🧨 *Sri Pathrakali Crackers Order*`);\r\n    lines.push(`--------------------------------`);\r\n    lines.push(`👤 *Name:* ${name}`);\r\n    lines.push(`📞 *Phone:* ${phone}`);\r\n    lines.push(`📍 *Place:* ${place}`);\r\n    lines.push(``);\r\n    lines.push(`🛒 *Items Ordered:*`);\r\n\r\n    cartItems.forEach((item, idx) => {\r\n      const discountedPrice = item.price * DISCOUNT;\r\n      const subtotal = discountedPrice * item.quantity;\r\n\r\n      lines.push(`${idx + 1}. ${item.name}`);\r\n      lines.push(`   Qty: ${item.quantity}`);\r\n      lines.push(`   Price: ₹${discountedPrice.toFixed(2)} each`);\r\n      lines.push(`   Subtotal: ₹${subtotal.toFixed(2)}`);\r\n      lines.push(``);\r\n    });\r\n\r\n    lines.push(`💰 *Total Payable:* ₹${total.toFixed(2)}`);\r\n    lines.push(`🎉 Thank you for ordering with us!`);\r\n\r\n    const message = lines.join('\\n');\r\n    const encodedMessage = encodeURIComponent(message);\r\n    const whatsappNumber = '917305171319';\r\n\r\n    const isMobile = /Android|iPhone|iPad|iPod/i.test(navigator.userAgent);\r\n\r\n    if (isMobile) {\r\n      // Mobile: open WhatsApp app\r\n      window.location.href = `https://wa.me/${whatsappNumber}?text=${encodedMessage}`;\r\n    } else {\r\n      // Desktop: try WhatsApp app via iframe first, fallback to web\r\n      const appUrl = `whatsapp://send?phone=${whatsappNumber}&text=${encodedMessage}`;\r\n      const webUrl = `https://web.whatsapp.com/send?phone=${whatsappNumber}&text=${encodedMessage}`;\r\n\r\n      const iframe = document.createElement('iframe');\r\n      iframe.style.display = 'none';\r\n      iframe.src = appUrl;\r\n      document.body.appendChild(iframe);\r\n\r\n      setTimeout(() => {\r\n        document.body.removeChild(iframe);\r\n        window.open(webUrl, '_blank');\r\n      }, 1000);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className={`cart-drawer ${isOpen ? 'open' : ''}`}>\r\n      <div className=\"cart-drawer-header\">\r\n        <h2>Your Cart</h2>\r\n        <button onClick={onClose} className=\"close-button\">&times;</button>\r\n      </div>\r\n\r\n      {cartItems.length === 0 ? (\r\n        <p className=\"empty-cart\">Your cart is empty</p>\r\n      ) : (\r\n        <>\r\n          <div className=\"cart-items\">\r\n            {cartItems.map((item) => (\r\n              <CartItem\r\n                key={item._id}\r\n                item={item}\r\n                onRemoveFromCart={onRemoveFromCart}\r\n                onUpdateQuantity={onUpdateQuantity}\r\n              />\r\n            ))}\r\n          </div>\r\n\r\n          <div className=\"cart-drawer-summary\">\r\n            <h3 style={{ color: 'white' }}>\r\n              Total (after 80% OFF): ₹{total.toFixed(2)}\r\n            </h3>\r\n\r\n            <div className=\"customer-details\" style={{ marginBottom: '10px' }}>\r\n              <input\r\n                type=\"text\"\r\n                placeholder=\"Customer Name\"\r\n                value={name}\r\n                onChange={(e) => setName(e.target.value)}\r\n              />\r\n              <input\r\n                type=\"text\"\r\n                placeholder=\"Phone Number\"\r\n                value={phone}\r\n                onChange={(e) => setPhone(e.target.value)}\r\n              />\r\n              <input\r\n                type=\"text\"\r\n                placeholder=\"Place\"\r\n                value={place}\r\n                onChange={(e) => setPlace(e.target.value)}\r\n              />\r\n            </div>\r\n\r\n            <button className=\"purchase-button\" onClick={handleSubmitOrder}>\r\n              📤 Submit Order to WhatsApp\r\n            </button>\r\n          </div>\r\n        </>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default CartDrawer;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}