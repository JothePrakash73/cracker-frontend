{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\jothe\\\\Downloads\\\\Cracker\\\\frontend\\\\src\\\\pages\\\\Products.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from \"react\";\nimport axios from \"axios\";\nimport \"./Product.css\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst ProductPurchase = () => {\n  _s();\n  const [products, setProducts] = useState([]);\n  const [cart, setCart] = useState(() => {\n    const saved = localStorage.getItem(\"cart\");\n    return saved ? JSON.parse(saved) : {};\n  });\n\n  // Fetch products from backend\n  useEffect(() => {\n    axios.get(\"/api/products\").then(res => setProducts(res.data)).catch(err => console.error(\"Failed to fetch products\", err));\n  }, []);\n\n  // Save cart to localStorage on change\n  useEffect(() => {\n    localStorage.setItem(\"cart\", JSON.stringify(cart));\n  }, [cart]);\n\n  // Handle add product to cart or increase quantity\n  const addToCart = id => {\n    setCart(prev => ({\n      ...prev,\n      [id]: (prev[id] || 0) + 1\n    }));\n  };\n\n  // Handle quantity increase/decrease\n  const updateQuantity = (id, delta) => {\n    setCart(prev => {\n      const newQty = (prev[id] || 0) + delta;\n      if (newQty <= 0) {\n        const newCart = {\n          ...prev\n        };\n        delete newCart[id];\n        return newCart;\n      }\n      return {\n        ...prev,\n        [id]: newQty\n      };\n    });\n  };\n\n  // Calculate total\n  const totalPrice = Object.entries(cart).reduce((acc, [id, qty]) => {\n    const prod = products.find(p => p._id === id);\n    return prod ? acc + prod.price * qty : acc;\n  }, 0);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"purchase-container\",\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      children: \"Product Purchase\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"products-list\",\n      children: products.length === 0 ? /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"Loading products...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 56,\n        columnNumber: 11\n      }, this) : products.map(product => /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"product-card\",\n        children: [/*#__PURE__*/_jsxDEV(\"img\", {\n          src: product.image,\n          alt: product.name\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 60,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n          children: product.name\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 61,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [\"\\u20B9\", product.price]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 62,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => addToCart(product._id),\n          children: \"Add to Cart\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 63,\n          columnNumber: 15\n        }, this)]\n      }, product._id, true, {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 13\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"cart-section\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"\\uD83D\\uDED2 Your Cart\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 9\n      }, this), Object.keys(cart).length === 0 ? /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"No items in cart.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(\"ul\", {\n        children: Object.entries(cart).map(([id, qty]) => {\n          const product = products.find(p => p._id === id);\n          if (!product) return null;\n          return /*#__PURE__*/_jsxDEV(\"li\", {\n            className: \"cart-item\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              children: product.name\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 80,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: () => updateQuantity(id, -1),\n                children: \"-\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 82,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"b\", {\n                children: qty\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 83,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: () => updateQuantity(id, 1),\n                children: \"+\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 84,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 81,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              children: [\"\\u20B9\", product.price * qty]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 86,\n              columnNumber: 19\n            }, this)]\n          }, id, true, {\n            fileName: _jsxFileName,\n            lineNumber: 79,\n            columnNumber: 17\n          }, this);\n        })\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n        children: [\"Total: \\u20B9\", totalPrice]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 52,\n    columnNumber: 5\n  }, this);\n};\n_s(ProductPurchase, \"ivhms9x8sfg3se6LtJaNIo4Vn0w=\");\n_c = ProductPurchase;\nexport default ProductPurchase;\nvar _c;\n$RefreshReg$(_c, \"ProductPurchase\");","map":{"version":3,"names":["React","useState","useEffect","axios","jsxDEV","_jsxDEV","ProductPurchase","_s","products","setProducts","cart","setCart","saved","localStorage","getItem","JSON","parse","get","then","res","data","catch","err","console","error","setItem","stringify","addToCart","id","prev","updateQuantity","delta","newQty","newCart","totalPrice","Object","entries","reduce","acc","qty","prod","find","p","_id","price","className","children","fileName","_jsxFileName","lineNumber","columnNumber","length","map","product","src","image","alt","name","onClick","keys","_c","$RefreshReg$"],"sources":["C:/Users/jothe/Downloads/Cracker/frontend/src/pages/Products.jsx"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport axios from \"axios\";\r\nimport \"./Product.css\";\r\n\r\nconst ProductPurchase = () => {\r\n  const [products, setProducts] = useState([]);\r\n  const [cart, setCart] = useState(() => {\r\n    const saved = localStorage.getItem(\"cart\");\r\n    return saved ? JSON.parse(saved) : {};\r\n  });\r\n\r\n  // Fetch products from backend\r\n  useEffect(() => {\r\n    axios.get(\"/api/products\")\r\n      .then((res) => setProducts(res.data))\r\n      .catch((err) => console.error(\"Failed to fetch products\", err));\r\n  }, []);\r\n\r\n  // Save cart to localStorage on change\r\n  useEffect(() => {\r\n    localStorage.setItem(\"cart\", JSON.stringify(cart));\r\n  }, [cart]);\r\n\r\n  // Handle add product to cart or increase quantity\r\n  const addToCart = (id) => {\r\n    setCart((prev) => ({\r\n      ...prev,\r\n      [id]: (prev[id] || 0) + 1,\r\n    }));\r\n  };\r\n\r\n  // Handle quantity increase/decrease\r\n  const updateQuantity = (id, delta) => {\r\n    setCart((prev) => {\r\n      const newQty = (prev[id] || 0) + delta;\r\n      if (newQty <= 0) {\r\n        const newCart = { ...prev };\r\n        delete newCart[id];\r\n        return newCart;\r\n      }\r\n      return { ...prev, [id]: newQty };\r\n    });\r\n  };\r\n\r\n  // Calculate total\r\n  const totalPrice = Object.entries(cart).reduce((acc, [id, qty]) => {\r\n    const prod = products.find((p) => p._id === id);\r\n    return prod ? acc + prod.price * qty : acc;\r\n  }, 0);\r\n\r\n  return (\r\n    <div className=\"purchase-container\">\r\n      <h1>Product Purchase</h1>\r\n      <div className=\"products-list\">\r\n        {products.length === 0 ? (\r\n          <p>Loading products...</p>\r\n        ) : (\r\n          products.map((product) => (\r\n            <div key={product._id} className=\"product-card\">\r\n              <img src={product.image} alt={product.name} />\r\n              <h3>{product.name}</h3>\r\n              <p>â‚¹{product.price}</p>\r\n              <button onClick={() => addToCart(product._id)}>Add to Cart</button>\r\n            </div>\r\n          ))\r\n        )}\r\n      </div>\r\n\r\n      <div className=\"cart-section\">\r\n        <h2>ðŸ›’ Your Cart</h2>\r\n        {Object.keys(cart).length === 0 ? (\r\n          <p>No items in cart.</p>\r\n        ) : (\r\n          <ul>\r\n            {Object.entries(cart).map(([id, qty]) => {\r\n              const product = products.find((p) => p._id === id);\r\n              if (!product) return null;\r\n              return (\r\n                <li key={id} className=\"cart-item\">\r\n                  <span>{product.name}</span>\r\n                  <span>\r\n                    <button onClick={() => updateQuantity(id, -1)}>-</button>\r\n                    <b>{qty}</b>\r\n                    <button onClick={() => updateQuantity(id, 1)}>+</button>\r\n                  </span>\r\n                  <span>â‚¹{product.price * qty}</span>\r\n                </li>\r\n              );\r\n            })}\r\n          </ul>\r\n        )}\r\n        <h3>Total: â‚¹{totalPrice}</h3>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ProductPurchase;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}